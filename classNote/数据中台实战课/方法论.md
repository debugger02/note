# 数据中台建设方法

- oneData: 所有数据只加工一次
- OneService：数据即服务，强调数据中台中的数据应该是通过 API 接口的方式被访问

## oneData

建设数据中台之前，每个部门内部都会有一些小的数仓去完成本部门的数据分析需求。同样的一个需求在不同的部门间常常重复开发，十分低效浪费时间。数据中台就是要形成一个公共数据层，消灭这些跨部门的小数仓，实现数据的复用，所以强调数据只加工一次，不会因为不同的应用场景，不同的部门数据重复加工。实现的方法如下：

1. 分主题域管理‘
2. 命名规范定义
3. 指标一致
4. 数据模型复用
5. 数据完善

好的`主题域划分`，是相对稳定，尽可能地覆盖绝大多数的表。还要对`表的命名进行规范化统一`， 表的名称中最好能够携带表的主题域、业务过程、分层以及分区信息,接着你还必须构建全局的`指标字典`，确保所有表中相同指标的口径必须一致。为了`实现模型的复用`，数据中台适合采用`分层的设计方式`，常见的分层包括：ODS 原始数据层，DWD 明细数据层，DWS 轻度汇总数据层，ADS/DM 应用数据层 / 数据集市层。最后，数据中台的数据必须尽可能的覆盖所有的业务过程，数据中台中每一层的数据也要尽可能完善，让数据使用者尽可能的使用汇总后的数据。

## oneService

OneService，数据即服务，强调数据中台中的数据应该是通过 API 接口的方式被访问。 API 接口一方面对应用开发屏蔽了底层数据存储，使用统一标准的 API 接口查询数据，提高了数据接入的速度。另一方面，对于数据开发，提高了数据应用的管理效率，建立了表到应用的链路关系。实现数据服务化的方法如下：

`屏蔽异构数据源`：数据服务必须要能够支撑类型丰富的查询引擎，满足不同场景下数据的查询需求，常见的有 MySQL、HBase、Greenplum、Redis、Elasticsearch 等。

`数据网关`：要实现包括权限、监控、流控、日志在内的一系列管控能力，哪个应用的哪个页面访问了哪个模型，要做到实时跟踪，如果有一些模型长时间没有被访问，应该予以下线。使用数据的每个应用都应该通过 accesskey 和 secretkey 实现身份认证和接口权限的管理。另外，访问日志可以方便在访问出现问题时，加快排查速度。

`逻辑模型`：从用户的视角出发，屏蔽底层的模型设计的实现，面向用户提供逻辑模型。什么是逻辑模型呢？熟悉数据库的同学应该知道，数据库中有一个视图的概念，视图本身并没有真实的数据，一个视图可以关联一张或者多张表，每次在查询的时候，动态地将不同表的查询结果聚合成视图的查询结果。逻辑模型可以类比视图，它可以帮助应用开发者屏蔽底层的数据物理实现，实现相同粒度的数据构造一个逻辑模型，简化了数据接入的复杂度。

`性能和稳定性`：由于数据服务侵入到用户的访问链路，所以对服务的可用性和性能都有很高的要求，数据服务必须是无状态的，可以做到横向扩展。

## 数据中台支撑技术

<div align="center">
    <img src="../../zzzimg/hadoop/数据中台架构.jpg" width="50%" >
</div>

## 总结

<div align="center">
    <img src="../../zzzimg/hadoop/数据中台方法论.jpg" width="50%" >
</div>