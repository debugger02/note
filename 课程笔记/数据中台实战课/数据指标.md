## 数据指标的混乱

数据指标常见问题如下：
1. 相同指标名称，口径定义不同
2. 相同口径，指标名称不一样。
3. 不同限定词，描述相同事实过程的两个指标，相同事实部分口径不一致
4. 指标口径描述错误
5. 指标口径描述不清晰
6. 指标命名难于理解
7. 指标数据来源和计算逻辑不清晰

解释：名称是简易指标名，口径是具体的指标含义描述。口径是对名称的定义。

## 如何规范化定义指标

1. 面向主题域管理。
2. 拆分原子指标和派生指标
3. 遵循指标命名规范
4. 关联的应用和可分析维度
5. 分等级管理

<div align="center">
    <img src="../../zzzimg/hadoop/指标定义过程.jpg" width="70%" >
</div>

为了提高指标管理的效率，你需要按照业务线、主题域和业务过程三级目录方式管理指标（业务线是顶级目录）.

统计周期、统计粒度、业务限定、原子指标，组成`派生指标`，所以`原子指标`可以定义为不能够按照上述规则进一步拆分的指标。

<div align="center">
    <img src="../../zzzimg/hadoop/派生指标.jpg" width="70%" >
</div>

指标命名规范要遵循两个基本的原则：
- 易懂，就是看到指标的名称，就可以基本判断这个指标归属于哪个业务过程；
- 统一，就是要确保派生指标和它继承的原子指标命名是一致的。

对于原子指标，指标名称适合用“动作 + 度量”的命名方式（比如注册用户数、购买用户数），标识的命名用英文简写或者汉语拼音缩写比较好。

对于派生指标，指标名称应该严格遵循“时间周期 + 统计粒度 + 修饰词 + 原子指标”的命名方式，标识命名要用“修饰词 _ 原子指标 _ 时间周期”的方式。

<div align="center">
    <img src="../../zzzimg/hadoop/派生指标案例.jpg" width="70%" >
</div>

`关联的应用和可分析维度。`

对于使用指标的人（运营、分析师）了解了这个指标的口径定义之后，下一步就是要看指标的数值。所以，在全局的指标字典中，还应该有指标被哪些应用使用，这样方便去对应的数据产品或者报表上查看指标的数值。除此之外，还应该有指标的可分析维度，方便分析师从不同的维度分析指标的变化趋势。

`分等级管理`

- 一级指标：数据中台直接产出，核心指标（提供给公司高层看的）、原子指标以及跨部门的派生指标。要确保指标按时、保证质量产出，指标创建由中台负责；
- 二级指标：基于中台提供的原子指标，业务部门创建的派生指标。允许业务方自己创建，中台不承诺指标的产出时间和质量。

## 指标管理系统

难于共享；缺少权限控制；无法动态更新；指标无法跟数仓的模型动态关联。

指标系统是基于元数据中心构建的一个指标管理工具，它从元数据中心自动同步数仓的主题域和业务过程，按照规范化定义创建指标。新创建的指标同时会以特定类型的标签，下沉到元数据中心对应的表和字段上，这样在数据地图上就可以搜索到表关联的指标。

<div align="center">
    <img src="../../zzzimg/hadoop/指标管理系统.jpg" width="70%" >
</div>

<div align="center">
    <img src="../../zzzimg/hadoop/指标录入.jpg" width="70%" >
</div>


## 基于指标系统构建全局的指标字典

指标治理的最终结果，就是要形成一个全局业务口径一致的指标字典。让使用指标的人，可以通过指标字典，快速了解指标的业务含义和计算过程，不会对指标口径产生歧义。

**面对一个新的指标需求，如何基于指标系统完成指标开发流程**

<div align="center">
    <img src="../../zzzimg/hadoop/新增指标流程.jpg" width="70%" >
</div>

- 指标需求评审，需要需求方、数据开发、应用开发都参加。评审首先要确认这是不是一个新的指标，并明确它是原子指标还是派生指标。评审的目的就是要大家达成一致。

- 评审的结果一种是不需要开发，是一个已经存在的指标，直接可以通过设计逻辑模型（具体我会在数据服务章节讲），发布接口，获取数据。第二种就是需要开发。前者交付时间短，后者需要排期，交付时间长。

- 上面我提到指标有一级和二级之分，这个流程适用于一级指标，对于二级指标，可以不需要评审，当然开发也是由业务方开发和发布上线。

**面对已经存在的，混乱的指标现状，如何进行全局梳理**

1. 成立以数据产品或者分析师为核心的 1～3 人的工作小组，专门负责指标的全局梳理；
2. 制定指标梳理计划，明确指标梳理目标，覆盖多少个业务线，与业务方共同制定时间计划；
3. 对于每一个业务线，需要对还在使用的数据报表、数据产品进行盘点，这里顺便可以把没用的报表和数据产品应该下线；
4. 对于每一个报表和数据产品中涉及的指标，按照以下格式进行收集；

<div align="center">
    <img src="../../zzzimg/hadoop/已有指标梳理.jpg" width="70%" >
</div>

5. 对于收集的指标，明确业务口径，对于口径相同的，应该去除重复，关联的应用应该合并，此时以我的经验，可以过滤掉相当一部分；
6. 根据指标业务口径，明确指标所属的主题域、业务过程；
7. 区分指标类型，对于派生指标，要明确指标的统计粒度、修饰词、时间周期以及关联的原子指标；
8. 按照指标系统对指标的规范化定义，把整理好的指标录入指标系统。

## 总结

- 数据中台直接产出的核心指标必须实施强管理，由数据中台团队的专人或者小组负责，最好是数据产品经理的角色。
- 指标的管理必须结合系统 + 规范的治理方法，明确每个角色的职责，通过系统化的方法实现。
- 不同的两个指标描述的相同业务过程中的相同事实部分口径不一致，是指标梳理过程中最常见的问题，需要通过拆分原子指标和派生指标的方式解决。

<div align="center">
    <img src="../../zzzimg/hadoop/指标管理总结.jpg" width="70%" >
</div>