
1. 使用锁解决问题之前一定要理清楚，我们要保护的是什么逻辑，多线程执行的情况又是怎样的。

2. 加锁前要清楚锁和被保护的对象是不是一个层面的

除了没有分析清线程、业务逻辑和锁三者之间的关系随意添加无效的方法锁外，还有一种比较常见的错误是，没有理清楚锁和要保护的对象是否是一个层面的。

静态字段属于类，类级别的锁才能保护；而非静态字段属于类实例，实例级别的锁就可以保护。

## 加锁要考虑锁的粒度和场景问题

1. 即使我们确实有一些共享资源需要保护，也要尽可能降低锁的粒度，仅对必要的代码块甚至是需要保护的资源本身加锁

2. 区分读写场景以及资源的访问冲突，考虑使用悲观方式的锁还是乐观方式的锁。


## 多把锁要小心死锁问题

业务逻辑中有多把锁时要考虑死锁问题，通常的规避方案是，避免无限等待和循环等待。